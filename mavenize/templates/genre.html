{% extends "base.html" %}

{% block title %}
  Mavenize | {{ genre.name }} 
{% endblock %}

{% block body %}
  <div class="container">
    <div class="row">
      <div class="span12">
        <h1 class="title">{{ genre.name }}</h1>
        <ul class="nav nav-tabs stream-options">
          <li class="active"><a href="#recent" data-toggle="tab">Recent</a></li>
          <li><a href="#popular" data-toggle="tab">Popular</a></li>
          <li><a href="#latest" data-toggle="tab">Latest</a></li>
        </ul>
        <div class="tab-content">
          <div class="tab-pane active" id="recent">
            <ul id="search-results">
              {% include "partials/movie_results.html" %}
            <div id="load-movies"></div>
            </ul>
            <div id="load-more">
              Load More
            </div>
          </div>
          <div class="tab-pane" id="popular">
          </div>
          <div class="tab-pane" id="latest">
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock %}

{% block js %}
  <script type="text/javascript">
    $(window).load(function() {
      var page = 2

      // Load more button for feeds
      $('#load-more').click(function() {
        $(this).text('Loading...');
        $.get('/load/genre/{{ genre.url }}/' + page + '/', function(data) {
          if (data.length != 1)
            $('#load-movie').append(data);
          else
            $('#load-more').remove();
          $('#load-more').text('Load More');
          page += 1;
        });
        return false;
      });
    })
  </script> 
{% endblock %}
